{% extends "layout2.html" %}
{% block styles %}
<link rel="stylesheet" href="/static/multiselect-easy/easySelectStyle.css" />
{% endblock %}
{% block contenidoprincipal %}
<div class="row">
    <h2 class="d-none display-12  texto-rojoraro">Contacto</h2>
</div>
<div class="container">
    <div class="row">
        <div class="col-12 d-none">
            <div
                class="d-flex justify-content-center align-items-center p-3 my-3 text-black bg-purple rounded shadow-sm">
                <h2 class="display-12  texto-rojoraro">Buscar</h2>
            </div>
        </div>
        <div class="col-12 mb-2">
            <p>
                <a class="btn btnfiltro w-100" data-toggle="collapse" href="#collapseExample" role="button"
                    aria-expanded="true" aria-controls="collapseExample">
                    RÁPIDA
                </a>
            </p>
            <div class="collapsed" id="collapseExample">
                <div class="card card-body border border-dark">
                    <div class="row">
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codsnip">Código SNIP</label>
                                <input class="form-control" type="text" id="codsnip" placeholder="Ingrese algún código">
                            </div>

                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codcontrado">Código de Contrato</label>
                                <input class="form-control" type="text" id="codcontrado"
                                    placeholder="Ingrese algún código de contrato">
                            </div>
                            <div class="form-group">
                                <label class="font-weight-bold" for="codproyectoinvpublica">Código de Proyecto de
                                    Inversión Pública</label>
                                <input class="form-control" type="text" id="codproyectoinvpublica"
                                    placeholder="Ingrese la descipción de algún objeto">
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codconvocatoria">Código de convocatoria </label>
                                <input class="form-control" type="text" id="codconvocatoria"
                                    placeholder="Ingrese algún código único de inversión ">
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="col-12 mb-2">
            <p>
                <a class="btn btnfiltro w-100" data-toggle="collapse" href="#collapseExample2" role="button"
                    aria-expanded="false" aria-controls="collapseExample2">
                    AVANZADA
                </a>
            </p>
            <div class="collapse" id="collapseExample2">
                <div class="card card-body border-dark">
                    <div class="row">
                        <div class="col">
                            <label class="font-weight-bold" for="codsnip">Busqueda avanzada de Contratos</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codsnip">Sector:</label>
                                <select id="secotoresopcion" class="form-control" >
                                    <option value="">Ninguno</option>
                                    {{opcionessectoreshtml|safe}}
                                </select>

                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col">
                                        <label class="font-weight-bold">Rango de Fecha:</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label class="font-weight-bold" for="fechaInicio">Inicio</label>
                                        <div class="input-group mb-3">

                                            <input type="date" id="fechaInicio" class="form-control"
                                                placeholder="Username" aria-label="Inicio"
                                                aria-describedby="basic-addon1">
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <label class="font-weight-bold" for="fechaFin">Fin</label>
                                        <div class="input-group mb-3">

                                            <input type="date" id="fechaFin" class="form-control" placeholder="Username"
                                                aria-label="Fin" aria-describedby="basic-addon1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codsnip">Entidad contratante:</label>
                                <input type="text" id="entidadcontratante" class="form-control" placeholder="Entidad contratista-Proveedor"
                                                aria-label="Entidad contratante" aria-describedby="basic-addon1">
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col">
                                        <label class="font-weight-bold" for="nombreentidad">Rango de Monto del
                                            contrato:</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <label class="font-weight-bold" for="monotMin">Mínimo</label>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">S/</span>
                                            </div>
                                            <input type="number" id="monotMin" class="form-control" placeholder="Mínimo"
                                                aria-label="Mínimo" aria-describedby="basic-addon1" min="0" max="1000000">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <label class="font-weight-bold" for="monotMax">Máximo</label>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">S/</span>
                                            </div>
                                            <input type="number" id="monotMax" class="form-control" placeholder="Máximo"
                                                aria-label="Máximo" aria-describedby="basic-addon1" min="0" max="1000000">
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" for="codsnip">Entidad contratista-Proveedor:</label>
                                <input type="text" id="entidadcontratista" class="form-control" placeholder="Entidad contratista-Proveedor"
                                                aria-label="Máximo" aria-describedby="basic-addon1">
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 mb-2">
            <div class="row w-100 d-flex justify-content-center" id="bsucarp">
                <div id="btnbuscar" class="col-sm-6 border  border-dark btnbuscar text-center rounded" >
                    <h3>Buscar</h3>
                </div>
            </div>


        </div>

    </div>
</div>
{% endblock %}
{% block contenidosecundario %}
<div class="col-12 mb-4">
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12 ">
                    <h4>
                        Registros máximos para proyectos y contratos:
                        <select name="cantidad" id="cantidad">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>                            
                        </select> 
                    </h4> 
                                      
                </div>
            </div>
            <div class="row ">
                
                <div class="col-md-4 d-flex justify-content-around align-items-center">
                    <h3>
                        Resultados de la búsqueda
                    </h3>                    
                </div>
                <div class="d-none col-md-4 ">
                    <button type="button" class="btn btn-secondary btn-lg">Descargar</button>
                </div>
                <div class="d-none col-md-4 ">
                    Items por página <input class="" type="text" id="objetospagina" size="2" class="text-center"
                        style=" width: 4ch;"> 1 de 2
                    <a class="btn " href="#" aria-label="Previous">
                        <h3>&laquo;</h3>
                    </a>
                    <a class="btn" href="#" aria-label="Next">
                        <h3>&raquo;</h3>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 mt-2">
            <div class="card">
                <h5 class="card-header text-center">Título de proyecto</h5>
                <div class="card-body resultado">
                    <div class="row">
                        <div class="col">
                            <div class="form-group ">
                                <label class="font-weight-bold " >
                                    <h2>Tipo de Tarjeta: Contrato</h2>                            
                                </label>                        
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" >Código de contrato</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Fecha de inicio</label>
                                <input type="text" class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Sector</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group ">
                                <label class="font-weight-bold" >Entidad Pública Contratante</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Fecha Fin</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold">Número de contrato</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
        
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group ">
                                <label class="font-weight-bold" >Entidad Contratista-Proveedor</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Monto Contratado</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold"  >Fecha de Suscripción de Contrato</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                        </div>
                        <div class="col-12 text-center d-none">
                            <button type="button" class="btn btn-secondary btn-lg">Ver detalle</button>
                        </div>
                    </div>
                </div>
        
            </div>
        </div>
        <div class="col-12 mt-2">
            <div class="card">
                <h5 class="card-header text-center">Título de proyecto</h5>
                <div class="card-body resultado">
                    <div class="row">
                        <div class="col">
                            <div class="form-group ">
                                <label class="font-weight-bold " >
                                    <h2>Tipo de Tarjeta: Proyecto</h2>                            
                                </label>                        
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group">
                                <label class="font-weight-bold" >Código de Único:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Departamento:</label>
                                <input type="text" class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Función:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group ">
                                <label class="font-weight-bold" >Nombre del Proyecto:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Provincia:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold">Etapa:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
        
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="form-group ">
                                <label class="font-weight-bold" >Entidad Pública Contratante:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold" >Distrito:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1" value="@valor" disabled>
                            </div>
                            <div class="form-group ">
                                <label class="font-weight-bold"  >Estado del proyecto:</label>
                                <input type="text"  class="form-control" placeholder="Máximo"  aria-label="Máximo" aria-describedby="basic-addon1"  value="@valor" disabled>
                            </div>
                        </div>
                        <div class="col-12 text-center d-none">
                            <button type="button" class="btn btn-secondary btn-lg">Ver detalle</button>
                        </div>
                    </div>
                </div>
        
            </div>
        </div>
    </div>
</div>





{% endblock %}

{% block scripts %}

<script>
    $('#collapseExample').collapse()
    $('#codsnip').val();
    $('#nombreentidad').val();
    $('#codcontrado').val();
    $('#descripobjeto').val();
    $('#codinversion').val();
    $('#identificonvoca').val();
    //https://www.cssscript.com/single-multi-select-vanilla/
    /*
    codsnip
    nombreentidad
    codcontrado
    descripobjeto
    codinversion
    identificonvoca
    */

</script>
<script src="/static/multiselect-easy/easySelect.js"></script>
<script>
    /*
    $(".demo3").easySelect({
        buttons: true, // 
        search: true,
        placeholder: 'Seleccione opción',
        placeholderColor: 'green',
        selectColor: '#524781',
        itemTitle: 'Opciones',
        showEachItem: true,
        width: '80%',
        dropdownMaxHeight: '450px',
    });*/
    
    //#Búsqueda básica
    
    $('#btnbuscar').click(function(){
        k={
                CodigoProyectoInversionPublica: $("#codproyectoinvpublica").val(),
                CodigoSNIP: $("#codsnip").val(),
                CodigoConvocatoria: $("#codconvocatoria").val(),
                NombreContratista: $("#entidadcontratista").val(),
                NombreContratante: $("#entidadcontratante").val() ,
                CodigoContrato: $("#codcontrado").val(),
                MontoTotalContratoMinimo: $("#monotMin").val(),
                MontoTotalContratoMaximo: $("#monotMax").val(),
                FechaInicioContrato: $("#fechaInicio").val(),
                FechaFinContrato: $("#fechaFin").val(),
                NombreSector: $("#secotoresopcion").val(),
                NumeroResultado:$("#cantidad").val(),
                    }
        console.log(k)
        buscar()
    });
    function buscar() {

            $.ajax({                
            
            type : "POST",
            url  : "http://127.0.0.1:4000/buscador-basico",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',            
            data: JSON.stringify({
                CodigoProyectoInversionPublica: $("#codproyectoinvpublica").val(),
                CodigoSNIP: $("#codsnip").val(),
                CodigoConvocatoria: $("#codconvocatoria").val(),
                NombreContratista: $("#entidadcontratista").val(),
                NombreContratante: $("#entidadcontratante").val() ,
                CodigoContrato: $("#codcontrado").val(),
                MontoTotalContratoMinimo: $("#monotMin").val(),
                MontoTotalContratoMaximo: $("#monotMax").val(),
                FechaInicioContrato: $("#fechaInicio").val(),
                FechaFinContrato: $("#fechaFin").val(),
                NombreSector: $("#secotoresopcion").val(),
                //NumeroResultado:$("#cantidad").val(),
                NumeroResultado:"2",
                    }),     
        }).done(function(response){        
            let s_response  = response
            console.log(s_response) 
            let jsonData = JSON.parse(s_response);
            console.log(response)          
        }).fail(function(error){ 
            console.log('ERROR')      
            console.log(error)      
            alert('Error al buscar');        
    })

    }
    


</script>
{% endblock %}